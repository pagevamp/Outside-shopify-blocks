{% liquid
    assign leadspace_overlay = true
    if section.settings.bg_overlay_options == "bg-overlay--full"
      assign bg_overlay_option = '#212121'
      assign bg_opacity = '0.3'
    elsif section.settings.bg_overlay_options == "bg-overlay--top"
      assign bg_overlay_option = 'linear-gradient(0deg, rgba(33, 33, 33, 0.00) 67.75%, rgba(33, 33, 33, 0.80) 100%)'
      assign bg_opacity = '1'
    else
      assign leadspace_overlay = false
    endif
%}
{% style %}
  #shopify-section-{{ section.id }} .m-leadspace-fullbleed__bg {
    aspect-ratio: {{ section.settings.section_bg_mobile_ratio }};
    @media(min-width:768px) {
      aspect-ratio: {{ section.settings.section_bg_desktop_ratio }};
    }
  }
  {% if leadspace_overlay %}
    #shopify-section-{{ section.id }} .m-leadspace-fullbleed__bg .m-leadspace-fullbleed__picture:before {
      content: "";
      width: 100%;
      height: 100%;
      position: absolute;
      inset: 0;
      background: {{ bg_overlay_option }};
      opacity: {{ bg_opacity }};
    }
  {% endif %}
  .m-leadspace-fullbleed:has(.zb-position-sticky) {
    position: sticky;
    top: 0;
  }
{% endstyle %}

{% liquid
  if section.settings.section_title != blank
    assign section_title = section.settings.section_title
  else
    assign section_title = page.title
  endif
%}

<div class="m-leadspace-fullbleed__wrapper {% if section.settings.enable_sticky %}zb-position-sticky{% endif %}">
  <div class="m-leadspace-fullbleed__bg position-relative d-flex {{ section.settings.content_vertical_alignment }}">
    {%- if section.settings.section_bg_desktop != blank -%}
      <picture class="m-leadspace-fullbleed__picture c-picture position-absolute top-0 start-0 w-100 h-100">
        {%- if section.settings.section_bg_mobile != blank -%}
          <source srcset="{%- if section.settings.section_bg_mobile.width >= 375 -%}{{ section.settings.section_bg_mobile | image_url: width: 375 }} 375w,{%- endif -%}
          {%- if section.settings.section_bg_mobile.width >= 550 -%}{{ section.settings.section_bg_mobile | image_url: width: 550 }} 550w,{%- endif -%}
          {%- if section.settings.section_bg_mobile.width >= 750 -%}{{ section.settings.section_bg_mobile | image_url: width: 750 }} 750w,{%- endif -%}
          {%- if section.settings.section_bg_mobile.width >= 1100 -%}{{ section.settings.section_bg_mobile | image_url: width: 1100 }} 1100w,{%- endif -%}
          {%- if section.settings.section_bg_mobile.width >= 1500 -%}{{ section.settings.section_bg_mobile | image_url: width: 1500 }} 1500w,{%- endif -%}
          {{ section.settings.section_bg_mobile | image_url }} {{ section.settings.section_bg_mobile.width }}w"
          media="(max-width: 767px)">

        {%- else -%}
          <source srcset="{%- if section.settings.section_bg_desktop.width >= 375 -%}{{ section.settings.section_bg_desktop | image_url: width: 375 }} 375w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 550 -%}{{ section.settings.section_bg_desktop | image_url: width: 550 }} 550w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 750 -%}{{ section.settings.section_bg_desktop | image_url: width: 750 }} 750w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 1100 -%}{{ section.settings.section_bg_desktop | image_url: width: 1100 }} 1100w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 1500 -%}{{ section.settings.section_bg_desktop | image_url: width: 1500 }} 1500w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 1780 -%}{{ section.settings.section_bg_desktop | image_url: width: 1780 }} 1780w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 2000 -%}{{ section.settings.section_bg_desktop | image_url: width: 2000 }} 2000w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 3000 -%}{{ section.settings.section_bg_desktop | image_url: width: 3000 }} 3000w,{%- endif -%}
          {%- if section.settings.section_bg_desktop.width >= 3840 -%}{{ section.settings.section_bg_desktop | image_url: width: 3840 }} 3840w,{%- endif -%}
          {{ section.settings.section_bg_desktop | image_url }}{{ section.settings.section_bg_desktop.width }}w"
          media="(min-width: 768px)">
        {%- endif -%}

          <img
              srcset="{%- if section.settings.section_bg_desktop.width >= 375 -%}{{ section.settings.section_bg_desktop | image_url: width: 375 }} 375w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 550 -%}{{ section.settings.section_bg_desktop | image_url: width: 550 }} 550w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 750 -%}{{ section.settings.section_bg_desktop | image_url: width: 750 }} 750w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 1100 -%}{{ section.settings.section_bg_desktop | image_url: width: 1100 }} 1100w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 1500 -%}{{ section.settings.section_bg_desktop | image_url: width: 1500 }} 1500w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 1780 -%}{{ section.settings.section_bg_desktop | image_url: width: 1780 }} 1780w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 2000 -%}{{ section.settings.section_bg_desktop | image_url: width: 2000 }} 2000w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 3000 -%}{{ section.settings.section_bg_desktop | image_url: width: 3000 }} 3000w,{%- endif -%}
              {%- if section.settings.section_bg_desktop.width >= 3840 -%}{{ section.settings.section_bg_desktop | image_url: width: 3840 }} 3840w,{%- endif -%}
              {{ section.settings.section_bg_desktop | image_url }} {{ section.settings.section_bg_desktop.width }}w"
              src="{{ section.settings.section_bg_desktop | image_url: width: 3000 }}"
              alt="{{ section.settings.section_bg_desktop.alt | default: shop.name }}"
              loading="eager"
              class="h-100 object-fit-cover"
              width="{{ section.settings.section_bg_desktop.width }}"
              height="{{ section.settings.section_bg_desktop.width | divided_by: section.settings.section_bg_desktop.aspect_ratio }}"
          />
      </picture>
      {% else %}
        <div class="m-leadspace-fullbleed__picture c-picture position-absolute top-0 start-0 w-100 h-100">
            {{ 'detailed-apparel-1' | placeholder_svg_tag: 'placeholder-svg w-100 h-100 object-fit-contain' }}
        </div>
    {% endif %}

    {% if section_title != blank %}
      <div class="m-leadspace-fullbleed__content z-1 position-relative w-100">
        <div class="container">
          <div class="row">
            <div class="col {% if section.settings.content_vertical_alignment == 'align-items-end' %}mb-4 mb-md-8{% endif %} {% if section.settings.content_vertical_alignment == 'align-items-start' %}mt-17 mt-md-20{% endif %}">
              <{{ section.settings.title_tag }} class="h1 m-leadspace-fullbleed__heading mb-0 {{ section.settings.title_color_class }} {{ section.settings.content_horizontal_alignment }}">
                {{ section_title | newline_to_br }}
              </{{ section.settings.title_tag }}>

              {% if section.settings.section_description != blank %}
                <div class="m-leadspace-fullbleed__description mt-4 text-medium--all {{ section.settings.title_color_class }} {{ section.settings.content_horizontal_alignment }} zb-richtext">
                  {{ section.settings.section_description | newline_to_br }}
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
  {
    "name": "Leadspace 3",
    "tag": "section",
    "class": "m-leadspace-fullbleed z-1",
    "settings": [
      {
        "type": "header",
        "content": "SECTION BACKGROUND SETTINGS"
      },
      {
        "type": "image_picker",
        "id": "section_bg_desktop",
        "label": "Background Image Desktop"
      },
      {
        "type": "select",
        "id": "section_bg_desktop_ratio",
        "label": "Background Ratio Desktop",
        "options": [
          {
            "value": "18/5",
            "label": "Small(18/5)"
          },
          {
            "value": "16/9",
            "label": "Medium(16/9)"
          },
          {
            "value": "3/2",
            "label": "large(3/2)"
          }
        ],
        "default": "18/5"
      },
      {
        "type": "image_picker",
        "id": "section_bg_mobile",
        "label": "Background Image Mobile"
      },
      {
        "type": "select",
        "id": "section_bg_mobile_ratio",
        "label": "Background Ratio Mobile",
        "options": [
          {
            "value": "195/103",
            "label": "Small(195/103)"
          },
          {
            "value": "3/2",
            "label": "Medium(3/2)"
          },
          {
            "value": "1/1",
            "label": "large(1/1)"
          }
        ],
        "default": "195/103"
      },
      {
        "type": "select",
        "id": "bg_overlay_options",
        "label": "Bg Overlay Options",
        "options": [
          {
            "value": "bg-overlay--full",
            "label": "Bg Overlay Full"
          },
          {
            "value": "bg-overlay--top",
            "label": "Bg Overlay Top"
          },
          {
            "value": "no-overlay",
            "label": "No Overlay"
          }
        ],
        "default": "no-overlay"
      },
      {
        "type": "header",
        "content": "SECTION TITLE SETTINGS"
      },
      {
        "type": "textarea",
        "id": "section_title",
        "label": "Section Title",
        "default": "Leadspace 3"
      },
      {
        "type": "select",
        "id": "title_tag",
        "label": "Heading Tag",
        "options": [
          {
            "value": "h1",
            "label": "H1"
          },
          {
            "value": "h2",
            "label": "H2"
          },
          {
            "value": "h3",
            "label": "H3"
          },
          {
            "value": "h4",
            "label": "H4"
          },
          {
            "value": "h5",
            "label": "H5"
          }
        ],
        "default": "h1"
      },
      {
        "type": "header",
        "content": "SECTION DESCRIPTION SETTINGS"
      },
      {
        "type": "richtext",
        "id": "section_description",
        "label": "Section Description",
        "default": "<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque sint adipisci perspiciatis impedit. Provident in aperiam at! Eaque, accusantium explicabo.</p>"
      },
      {
        "type": "select",
        "id": "content_vertical_alignment",
        "label": "Content Vertical Alignment",
        "options": [
          {
            "value": "align-items-start",
            "label": "Top"
          },
          {
            "value": "align-items-center",
            "label": "Middle"
          },
          {
            "value": "align-items-end",
            "label": "End"
          }
        ],
        "default": "align-items-end"
      },
      {
        "type": "select",
        "id": "content_horizontal_alignment",
        "label": "Content Horizontal Alignment",
        "options": [
          {
            "value": "text-start",
            "label": "Left"
          },
          {
            "value": "text-center",
            "label": "Center"
          },
          {
            "value": "text-end",
            "label": "Right"
          }
        ],
        "default": "text-start"
      },
      {
        "type": "select",
        "id": "title_color_class",
        "label": "Title Color",
        "options": [
          {
            "value": "text-secondary",
            "label": "Default"
          },
          {
            "value": "text-primary",
            "label": "Primary"
          },
          {
            "value": "text-stone-500",
            "label": "Stone 500"
          }
        ],
        "default": "text-stone-500"
      },
      {
        "type": "checkbox",
        "id": "enable_sticky",
        "label": "Enable Sticky ?",
        "default": true
      }
    ],
    "presets": [
      {
        "name": "Leadspace 3"
      }
    ]
  }
{% endschema %}
